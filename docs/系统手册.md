# AI å¤šæ™ºèƒ½ä½“è¾©è®ºç³»ç»Ÿæ‰‹å†Œ

## ç›®å½•

1. [é¡¹ç›®ç®€ä»‹](#1-é¡¹ç›®ç®€ä»‹)
   - [1.1 é¡¹ç›®ç›®æ ‡](#11-é¡¹ç›®ç›®æ ‡)
   - [1.2 æ™ºèƒ½ä½“è®¾å®šä¸è§’è‰²é€‰æ‹©](#12-æ™ºèƒ½ä½“è®¾å®šä¸è§’è‰²é€‰æ‹©)
   - [1.3 ç³»ç»ŸåŠŸèƒ½æ¦‚è§ˆ](#13-ç³»ç»ŸåŠŸèƒ½æ¦‚è§ˆ)
   - [1.4 è¾©è®ºæµç¨‹è®¾è®¡](#14-è¾©è®ºæµç¨‹è®¾è®¡)
   - [1.5 åº”ç”¨ä»·å€¼ä¸é€‚ç”¨åœºæ™¯](#15-åº”ç”¨ä»·å€¼ä¸é€‚ç”¨åœºæ™¯)
2. [ç³»ç»Ÿç»“æ„](#2-ç³»ç»Ÿç»“æ„)
   - [2.1 ç³»ç»Ÿæ¶æ„å›¾](#21-ç³»ç»Ÿæ¶æ„å›¾)
   - [2.2 æ¨¡å—ç»„æˆ](#22-æ¨¡å—ç»„æˆ)
   - [2.3 å„æ¨¡å—åä½œæµç¨‹](#23-å„æ¨¡å—åä½œæµç¨‹)
   - [2.4 ç³»ç»Ÿç‰¹ç‚¹](#24-ç³»ç»Ÿç‰¹ç‚¹)
3. [éƒ¨ç½²æŒ‡å—](#3-éƒ¨ç½²æŒ‡å—)
   - [3.1 ç¯å¢ƒä¾èµ–å®‰è£…](#31-ç¯å¢ƒä¾èµ–å®‰è£…)
   - [3.2 é…ç½®ç¯å¢ƒå˜é‡](#32-é…ç½®ç¯å¢ƒå˜é‡)
   - [3.3 å¯åŠ¨æœåŠ¡](#33-å¯åŠ¨æœåŠ¡)
   - [3.4 å¯åŠ¨æ³¨æ„äº‹é¡¹](#34-å¯åŠ¨æ³¨æ„äº‹é¡¹)
4. [æ•°æ®åº“ç»“æ„è¯´æ˜](#4-æ•°æ®åº“ç»“æ„è¯´æ˜)
   - [4.1 topics è¡¨ï¼ˆè¾©é¢˜è¡¨ï¼‰](#41-topics-è¡¨è¾©é¢˜è¡¨)
   - [4.2 agents è¡¨ï¼ˆè§’è‰²è¡¨ï¼‰](#42-agents-è¡¨è§’è‰²è¡¨)
   - [4.3 dialogues è¡¨ï¼ˆå‘è¨€è®°å½•è¡¨ï¼‰](#43-dialogues-è¡¨å‘è¨€è®°å½•è¡¨)
5. [æ¥å£è¯´æ˜](#5-æ¥å£è¯´æ˜)
   - [5.1 POST /api/debate_1 - ç«‹è®ºé˜¶æ®µ](#51-post-apidebate_1---ç«‹è®ºé˜¶æ®µ)
   - [5.2 POST /api/debate_2 - è¾©è®ºé˜¶æ®µ](#52-post-apidebate_2---è¾©è®ºé˜¶æ®µ)
   - [5.3 POST /api/debate_3 - æ™ºèƒ½ä½“æ€»ç»“](#53-post-apidebate_3---æ™ºèƒ½ä½“æ€»ç»“)
   - [5.4 POST /api/debate_4 - ä¸»æŒäººæ€»ç»“](#54-post-apidebate_4---ä¸»æŒäººæ€»ç»“)
   - [5.5 GET /api/dialogues - è·å–ç¬¬ä¸€è½®å‘è¨€](#55-get-apidialogues---è·å–ç¬¬ä¸€è½®å‘è¨€)
   - [5.6 GET /api/export-latest - å¯¼å‡ºè¾©è®ºå†…å®¹](#56-get-apiexport-latest---å¯¼å‡ºè¾©è®ºå†…å®¹)
   - [5.7 OpenAI API å¤–éƒ¨ä¾èµ–è¯´æ˜](#57-openai-api-å¤–éƒ¨ä¾èµ–è¯´æ˜)
6. [æ³¨æ„äº‹é¡¹ä¸å»ºè®®](#6-æ³¨æ„äº‹é¡¹ä¸å»ºè®®)
   - [6.1 ç³»ç»Ÿè¿è¡Œå»ºè®®](#61-ç³»ç»Ÿè¿è¡Œå»ºè®®)
   - [6.2 å®‰å…¨æ€§ä¸åˆè§„æ€§](#62-å®‰å…¨æ€§ä¸åˆè§„æ€§)
   - [6.3 å¯æ‹“å±•å»ºè®®](#63-å¯æ‹“å±•å»ºè®®)

---


## 1. é¡¹ç›®ç®€ä»‹

æœ¬ç³»ç»Ÿä¸ºåŸºäº RAGï¼ˆRetrieval-Augmented Generationï¼‰æ¶æ„çš„å¤šæ™ºèƒ½ä½“ AI è¾©è®ºå¹³å°ã€‚å®ƒé€šè¿‡å¤šä¸ªå…·å¤‡å›ºå®šè§’è‰²èº«ä»½çš„æ™ºèƒ½ä½“å›´ç»•æŒ‡å®šè¾©é¢˜å¼€å±•ç»“æ„åŒ–è®ºè¾©ï¼Œè‡ªåŠ¨ç”Ÿæˆå‘è¨€ã€åé©³ä¸æ€»ç»“å†…å®¹ï¼Œå¹¶æ”¯æŒå…¨è¿‡ç¨‹è®°å½•ã€å¯¼å‡ºä¸å‰ç«¯å¯è§†åŒ–å±•ç¤ºã€‚

è¯¥ç³»ç»Ÿæ—¨åœ¨æ¢ç´¢å¤šæ™ºèƒ½ä½“åœ¨å¤æ‚è®®é¢˜è®¨è®ºä¸­çš„ç«‹åœºæ„å»ºã€è¯æ®æ•´åˆä¸äº¤äº’ç”Ÿæˆèƒ½åŠ›ï¼Œå…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§ä¸ç ”ç©¶ä»·å€¼ã€‚

---

### 1.1 é¡¹ç›®ç›®æ ‡

- æ„å»ºä¸€ä¸ªç”±å¤šè§’è‰²æ™ºèƒ½ä½“å‚ä¸çš„ AI è¾©è®ºç³»ç»Ÿï¼›
- å¼•å…¥åŸºäºæ£€ç´¢å¢å¼ºç”Ÿæˆçš„çŸ¥è¯†æ”¯æ’‘æœºåˆ¶ï¼›
- è®¾è®¡ç»“æ„å®Œæ•´çš„è¾©è®ºæµç¨‹æ§åˆ¶é€»è¾‘ï¼›
- å®ç°å¯è§†åŒ–å±•ç¤ºä¸ä¸€é”®å¯¼å‡ºè¾©è®ºå†…å®¹ã€‚

---

### 1.2 æ™ºèƒ½ä½“è®¾å®šä¸è§’è‰²é€‰æ‹©

ç³»ç»Ÿé¢„è®¾äº”ç±»æ™ºèƒ½ä½“è§’è‰²ï¼Œæ¯æ¬¡è¾©è®ºå¯ä»ä¸­ä»»é€‰ä¸‰ä½å‚ä¸ï¼š

- ç¯ä¿ä¸»ä¹‰è€…
- ç»æµå­¦å®¶ 
- æ”¿ç­–åˆ¶å®šè€…
- æŠ€æœ¯ä¹è§‚ä¸»ä¹‰è€…  
- å“²å­¦è¯„è®ºè€…

æ¯ä¸ªè§’è‰²å…·å¤‡ç‹¬ç«‹å‘è¨€é£æ ¼å’Œè§‚ç‚¹å€¾å‘ï¼Œé€šè¿‡æ£€ç´¢å¢å¼ºæ¨¡å—å¼•ç”¨ç›¸å…³èµ„æ–™ï¼Œç”Ÿæˆç¬¦åˆè§’è‰²è§†è§’çš„å‘è¨€å†…å®¹ã€‚

---

### 1.3 ç³»ç»ŸåŠŸèƒ½æ¦‚è§ˆ

| åŠŸèƒ½æ¨¡å— | æè¿° |
|----------|------|
| å¤šè§’è‰² Agent æ¨¡æ‹Ÿ | é€‰æ‹©ä»»æ„ 3 ä¸ªè§’è‰²å‚ä¸è¾©è®ºï¼Œæ¯ä¸ªæ‹¥æœ‰ç‹¬ç«‹èº«ä»½ä¸è¯­æ–™èƒŒæ™¯ |
| RAG æ–‡çŒ®æ£€ç´¢æ¨¡å— | åŠ¨æ€è°ƒç”¨çŸ¥è¯†åº“ï¼Œæå–æ”¯æŒè§‚ç‚¹çš„æƒå¨å†…å®¹ç”¨äºç”Ÿæˆ |
| è‡ªåŠ¨åŒ–è¾©è®ºæµç¨‹ | ç³»ç»Ÿæ§åˆ¶å‘è¨€è½®æ¬¡ã€åé©³é¡ºåºä¸é˜¶æ®µåˆ‡æ¢ |
| LLM è§‚ç‚¹ç”Ÿæˆ | å‘è¨€ç”±è¯­è¨€æ¨¡å‹æ ¹æ®ä¸Šä¸‹æ–‡ä¸è¯æ®ç”Ÿæˆï¼Œé€»è¾‘ä¸¥å¯† |
| å‰ç«¯äº¤é”™å±•ç¤º | React å®ç°ä»¿èŠå¤©å¼å·¦å³äº¤é”™å‘è¨€ä¸é˜¶æ®µåˆ‡æ¢è§†è§‰æ•ˆæœ |
| è¾©è®ºæ—¥å¿—å¯¼å‡º | æ”¯æŒä¸€é”®å¯¼å‡ºå¯¹è¯ä¸º `.zip` åŒ…å«å®Œæ•´å‘è¨€ä¸å¼•ç”¨æ•°æ® |

---

### 1.4 è¾©è®ºæµç¨‹è®¾è®¡

ç³»ç»Ÿå°†ä¸€æ¬¡å®Œæ•´è¾©è®ºåˆ’åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µä¸ä¸€ä¸ªä¸»æŒäººæ€»ç»“é˜¶æ®µï¼š

#### é˜¶æ®µä¸€ï¼šç«‹è®ºé˜¶æ®µ

- æ¯ä¸ªæ™ºèƒ½ä½“åŸºäºè§’è‰²ç«‹åœºå’Œæ£€ç´¢ç»“æœï¼Œå›´ç»•è¾©é¢˜å‘è¨€ä¸€æ¬¡ï¼›
- å‘è¨€ç›®æ ‡ä¸ºæ˜ç¡®æ€åº¦ä¸æ ¸å¿ƒä¸»å¼ ï¼›
- ç”¨æˆ·å¯ä»¥æ§åˆ¶å‘è¨€é¡ºåºã€‚

#### é˜¶æ®µäºŒï¼šè¾©è®ºé˜¶æ®µ

- æ¯ä½æ™ºèƒ½ä½“å›´ç»•å‰è½®å†…å®¹å‘è¨€ä¸‰æ¬¡ï¼Œå…±ä¹è½®å‘è¨€ï¼›
- å‘è¨€å½¢å¼ä¸ºå›åº”ä¸åé©³ï¼Œæ„å»ºè§‚ç‚¹å†²çªï¼›
- æ‰€æœ‰ä¸Šä¸‹æ–‡å‡ä½œä¸ºè¯­è¨€æ¨¡å‹è¾“å…¥ï¼Œä¿æŒé€»è¾‘å»¶ç»­ã€‚

#### é˜¶æ®µä¸‰ï¼šæ€»ç»“é˜¶æ®µ

- æ¯ä¸ªæ™ºèƒ½ä½“å¯¹æœ¬æ–¹è§‚ç‚¹å’Œæ•´ä¸ªè¾©è®ºè¿›è¡Œæ€»ç»“ï¼›
- è¾“å‡ºåº”åŒ…å«è¦ç‚¹å›é¡¾ã€åæ€ä¸å¼ºè°ƒç«‹åœºï¼›

#### é˜¶æ®µå››ï¼šä¸»æŒäººæ€»ç»“

- ç³»ç»Ÿç”Ÿæˆä¸€ä¸ªä¸­ç«‹â€œæ€»ç»“è€…â€è§’è‰²ï¼Œå¯¹ä¸‰æ–¹æ€»ç»“å†…å®¹è¿›è¡Œæ•´åˆï¼›
- è¾“å‡ºæœ€ç»ˆæ€»ç»“è¯­å¥ï¼Œè¡¨è¾¾å¤šæ–¹å…±è¯†æˆ–å†²çªï¼›
- ä¸ºä½¿ç”¨è€…æˆ–è¯»è€…æä¾›å®è§‚è§†è§’çš„æ€»ç»“æŠ¥å‘Šã€‚

---

### 1.5 åº”ç”¨ä»·å€¼ä¸é€‚ç”¨åœºæ™¯

- é¢å‘å­¦æœ¯è¾…åŠ©å†™ä½œã€è§‚ç‚¹æ¼”ç»ƒã€ç«‹åœºåšå¼ˆå»ºæ¨¡ï¼›
- é€‚ç”¨äºå…·å¤‡å¤šå…ƒä»·å€¼å†²çªæˆ–æƒè¡¡çš„è®®é¢˜ï¼›
- æ”¯æŒå¯è§£é‡Šç”Ÿæˆã€Agent æ¨ç†è·¯å¾„è¿½è¸ªç­‰åç»­ç ”ç©¶ã€‚

## 2. ç³»ç»Ÿç»“æ„

æœ¬ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦» + æ•°æ®é©±åŠ¨çš„æ¶æ„ï¼Œåç«¯ç”± Express æ¡†æ¶æ­å»ºï¼Œè°ƒç”¨å¤šä¸ª Python è„šæœ¬ç”Ÿæˆå‘è¨€ï¼Œå‰ç«¯åŸºäº React å®ç°é¡µé¢é€»è¾‘ä¸å±•ç¤ºï¼Œæ•°æ®å­˜å‚¨é‡‡ç”¨ MySQL æ•°æ®åº“ã€‚

### 2.1 ç³»ç»Ÿæ¶æ„å›¾

ä¸‹å›¾å±•ç¤ºäº†æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶åŠå…¶äº¤äº’å…³ç³»ï¼š

![ç³»ç»Ÿæ¶æ„å›¾](architecture.png)

> *å¦‚å›¾æ‰€ç¤ºï¼Œç³»ç»Ÿä¸»è¦åŒ…æ‹¬ç”¨æˆ·ç•Œé¢ï¼ˆå‰ç«¯ï¼‰ã€ä¸­æ§é€»è¾‘ï¼ˆNode.jsï¼‰ã€è¯­è¨€ç”Ÿæˆæ¨¡å—ï¼ˆPythonï¼‰ã€å’Œæ•°æ®åº“ï¼ˆMySQLï¼‰å››å¤§éƒ¨åˆ†ã€‚*

---

### 2.2 æ¨¡å—ç»„æˆ

| æ¨¡å— | æŠ€æœ¯æ ˆ | åŠŸèƒ½èŒè´£ |
|------|--------|----------|
| å‰ç«¯ UI å±‚ | React + Vite | æ§åˆ¶é˜¶æ®µæ¨è¿›ã€å±•ç¤ºæ™ºèƒ½ä½“å‘è¨€ã€å¤´åƒç®¡ç†ç­‰ |
| åç«¯æ§åˆ¶å±‚ | Node.js + Express | æ§åˆ¶å‘è¨€æµç¨‹ã€è¿æ¥æ•°æ®åº“ã€è°ƒç”¨ Python å‘è¨€è„šæœ¬ |
| æ™ºèƒ½ä½“ç”Ÿæˆæ¨¡å— | Python + OpenAI API | æ¯ä¸ª Agent çš„è§‚ç‚¹ã€åé©³ã€æ€»ç»“å‡ç”±æ­¤ç”Ÿæˆ |
| æ•°æ®å­˜å‚¨å±‚ | MySQL | ä¿å­˜ topicã€agentsã€æ¯è½®å‘è¨€ç­‰ç»“æ„åŒ–æ•°æ® |
| è¾©è®ºå¯¼å‡ºæ¨¡å— | Python + Archiver | è‡ªåŠ¨æ•´ç†ç”Ÿæˆå‘è¨€è®°å½•å‹ç¼©åŒ…å¹¶æ”¯æŒä¸‹è½½ |

---

### 2.3 å„æ¨¡å—åä½œæµç¨‹

1. ç”¨æˆ·æäº¤è¾©é¢˜å’Œæ‰€é€‰è§’è‰²ï¼›
2. åç«¯æ’å…¥è¾©é¢˜å’Œæ™ºèƒ½ä½“ä¿¡æ¯è‡³æ•°æ®åº“ï¼›
3. åç«¯æ ¹æ®é˜¶æ®µï¼ˆç«‹è®º/åé©³/æ€»ç»“ï¼‰è°ƒç”¨ä¸åŒçš„ Python è„šæœ¬ï¼›
4. Python è„šæœ¬è°ƒç”¨ LLM + æ£€ç´¢ç³»ç»Ÿç”Ÿæˆå‘è¨€å¹¶è¿”å› JSONï¼›
5. åç«¯ä¿å­˜å‘è¨€è‡³ `dialogues` è¡¨ï¼›
6. å‰ç«¯ä»æ¥å£æ‹‰å–æ•°æ®ï¼Œå¹¶äº¤é”™å±•ç¤º Agent å‘è¨€å†…å®¹ï¼›
7. ç”¨æˆ·å¯ç‚¹å‡»æŒ‰é’®å¯¼å‡ºæ•´åœºè¾©è®ºä¸º `.zip` æ–‡ä»¶ã€‚

---

### 2.4 ç³»ç»Ÿç‰¹ç‚¹

- **æ¨¡å—æ¸…æ™°**ï¼šæ¯ä¸ªç¯èŠ‚é€»è¾‘ç‹¬ç«‹ï¼Œä¾¿äºç»´æŠ¤å’Œæ›¿æ¢ï¼›
- **æ•°æ®æŒä¹…åŒ–**ï¼šæ‰€æœ‰è¾©è®ºä¿¡æ¯æŒä¹…ä¿å­˜ï¼Œæ”¯æŒåˆ†æä¸å›æ”¾ï¼›
- **æµç¨‹æ§åˆ¶å®Œæ•´**ï¼šä»ç«‹è®ºåˆ°æ€»ç»“è‡ªåŠ¨æ¨è¿›ï¼Œæ¨¡æ‹ŸçœŸå®è¾©è®ºç»“æ„ï¼›
- **é«˜åº¦å¯æ‰©å±•**ï¼šæ”¯æŒæ·»åŠ æ–° Agent è§’è‰²ã€æ–°é˜¶æ®µã€æ–°æ£€ç´¢æºç­‰ã€‚



## 3. éƒ¨ç½²æŒ‡å—

æœ¬ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œéƒ¨ç½²æ­¥éª¤åŒ…æ‹¬ç¯å¢ƒä¾èµ–å®‰è£…ã€ç¯å¢ƒå˜é‡é…ç½®ã€åç«¯ + å‰ç«¯å¯åŠ¨ä¸‰éƒ¨åˆ†ã€‚å»ºè®®åœ¨ Node.js â‰¥ 18.0ã€Python â‰¥ 3.8 ç¯å¢ƒä¸­è¿è¡Œã€‚

---

### 3.1 ç¯å¢ƒä¾èµ–å®‰è£…

#### åç«¯ä¾èµ–

åœ¨ `/AI-Debate-backend` ç›®å½•ä¸‹æ‰§è¡Œï¼š

```bash
npm install express
npm install cors
npm install mysql2
npm install dotenv
```

#### Python ä¾èµ–

ç³»ç»Ÿä¸­çš„ Python è„šæœ¬ä½äº `AI-Debate-backend` ç›®å½•ä¸‹ï¼Œå»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒç®¡ç†ï¼š

```bash
pip install openai
pip install mysql-connector-python
pip install tqdm
pip install requests
```

> ä»¥ä¸Šä»…ä»…åˆ—å‡ºäº†å‡ ä¸ªéœ€è¦å®‰è£…çš„åº“çš„ä¾‹å­ï¼Œæ²¡æœ‰å…¨éƒ¨åˆ—å‡ºã€‚å¦‚éœ€è¿è¡Œ `export_debate.py` è„šæœ¬å¯¼å‡ºå†…å®¹ï¼Œè¯·ç¡®ä¿ Python èƒ½æ­£å¸¸è®¿é—® MySQLï¼Œå¹¶å®‰è£… `mysql-connector-python`ã€‚

#### å‰ç«¯ä¾èµ–

åœ¨ `/AI-Debate-frontend` ç›®å½•ä¸‹æ‰§è¡Œï¼š

```bash
npm install
```

---

### 3.2 é…ç½®ç¯å¢ƒå˜é‡

åœ¨åç«¯ç›®å½•ä¸‹æ–°å»ºæˆ–ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å†™ä»¥ä¸‹å­—æ®µï¼š

```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_mysql_password
DB_NAME=ai_debate

# OpenAI APIé…ç½®ï¼ˆRAGæ¨¡å—è°ƒç”¨ï¼‰
OPENAI_API_KEY=your_openai_key
OPENAI_API_BASE=https://api.openai.com/v1
```

---

### 3.3 å¯åŠ¨æœåŠ¡

ä¾ç…§ä»¥ä¸‹é¡ºåºå¯åŠ¨ç³»ç»Ÿç»„ä»¶ï¼š

#### å¯åŠ¨åç«¯æœåŠ¡

```bash
cd AI-Debate-backend
node app.js
```

æœåŠ¡é»˜è®¤è¿è¡Œåœ¨ï¼š

```
http://localhost:3001
```

#### å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
cd AI-Debate-frontend
npm run dev
```

å‰ç«¯é»˜è®¤è¿è¡Œåœ¨ï¼š

```
http://localhost:5173
```

---

### å¯åŠ¨æ³¨æ„äº‹é¡¹

- è¯·ç¡®è®¤ `.env` ä¸­æ•°æ®åº“ä¿¡æ¯ä¸ OpenAI å¯†é’¥æ­£ç¡®ï¼›
- æ•°æ®åº“è¡¨ç»“æ„å·²å®šä¹‰åœ¨ `AI-Debate-backend/database.sql`ï¼Œå¯ç”¨ä»¥ä¸‹å‘½ä»¤å¯¼å…¥ï¼š

```bash
mysql -u root -p ai_debate < database.sql
```

- Python ä¸ Node.js ä½¿ç”¨çš„ä¾èµ–è¾ƒè½»ï¼Œä½†å»ºè®®æŒ‰æ¨¡å—ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»ï¼›
- æ‰€æœ‰ Python è„šæœ¬å‡æ”¯æŒå‘½ä»¤è¡Œè°ƒç”¨ï¼Œè¿è¡Œæ—¶ä¾èµ–ä¸ `app.js` åŒçº§ç›®å½•ç»“æ„ä¸€è‡´ã€‚


## 4. æ•°æ®åº“ç»“æ„è¯´æ˜

æœ¬ç³»ç»Ÿä½¿ç”¨ MySQL æ•°æ®åº“ï¼Œå…±åŒ…å«ä¸‰ä¸ªä¸»è¡¨ï¼š`topics`ï¼ˆè¾©é¢˜è¡¨ï¼‰ã€`agents`ï¼ˆæ™ºèƒ½ä½“ä¿¡æ¯è¡¨ï¼‰ã€`dialogues`ï¼ˆå‘è¨€è®°å½•è¡¨ï¼‰ã€‚æ‰€æœ‰ä¸»é”®å‡ä¸ºè‡ªå¢å­—æ®µï¼Œå­—æ®µè®¾è®¡å…·å¤‡è‰¯å¥½çš„ç»“æ„åŒ–ä¸å¯æ‰©å±•æ€§ã€‚

---

### 4.1 `topics` è¡¨ï¼ˆè¾©é¢˜è¡¨ï¼‰

ç”¨äºè®°å½•ç³»ç»Ÿå†…çš„æ‰€æœ‰è¾©é¢˜å†…å®¹ã€‚

| å­—æ®µå   | ç±»å‹  | æè¿°         |
|----------|-------|--------------|
| id       | INT   | è¾©é¢˜ IDï¼Œè‡ªå¢ä¸»é”® |
| content  | TEXT  | è¾©é¢˜æ–‡æœ¬å†…å®¹ |

---

### 4.2 `agents` è¡¨ï¼ˆè§’è‰²è¡¨ï¼‰

è®°å½•å‚ä¸æŸä¸€è¾©é¢˜çš„å„æ™ºèƒ½ä½“è§’è‰²åŠå…¶å‘è¨€é¡ºåºã€‚

| å­—æ®µå      | ç±»å‹         | æè¿°                         |
|-------------|--------------|------------------------------|
| id          | INT          | æ™ºèƒ½ä½“ IDï¼Œè‡ªå¢ä¸»é”®          |
| topic_id    | INT          | å¤–é”®ï¼Œå…³è” `topics(id)`     |
| name        | VARCHAR(255) | æ™ºèƒ½ä½“åç§°ï¼Œå¦‚â€œç»æµå­¦å®¶â€     |
| order_index | INT          | å‘è¨€é¡ºåºï¼Œä» 1 å¼€å§‹           |

---

### 4.3 `dialogues` è¡¨ï¼ˆå‘è¨€è®°å½•è¡¨ï¼‰

ä¿å­˜æ™ºèƒ½ä½“åœ¨ä¸åŒè½®æ¬¡çš„å‘è¨€å†…å®¹åŠå¼•ç”¨æ–‡çŒ®ã€‚

| å­—æ®µå           | ç±»å‹  | æè¿°                                               |
|------------------|-------|----------------------------------------------------|
| id               | INT   | è®°å½• IDï¼Œè‡ªå¢ä¸»é”®                                  |
| topic_id         | INT   | å¤–é”®ï¼Œå…³è”è¾©é¢˜                                     |
| agent_id         | INT   | å¤–é”®ï¼Œå…³è”æ™ºèƒ½ä½“                                   |
| round_id         | INT   | å‘è¨€è½®æ¬¡ï¼š1ï¼ˆç«‹è®ºï¼‰2ï¼ˆè¾©è®ºï¼‰3ï¼ˆæ€»ç»“ï¼‰4ï¼ˆä¸»æŒäººæ€»ç»“ï¼‰ |
| utterance_index  | INT   | åœ¨å½“å‰è½®æ¬¡ä¸­çš„å‘è¨€é¡ºåºç¼–å·                         |
| conclusion       | TEXT  | æ™ºèƒ½ä½“å‘è¨€å†…å®¹                                     |
| references_json  | TEXT  | å¼•ç”¨æ–‡çŒ®ï¼Œå­˜å‚¨ä¸º JSON å­—ç¬¦ä¸²                      |

---

### ğŸ”— å¤–é”®å…³ç³»è¯´æ˜

- `agents.topic_id` â†’ `topics.id`
- `dialogues.topic_id` â†’ `topics.id`
- `dialogues.agent_id` â†’ `agents.id`

æ‰€æœ‰å¤–é”®å­—æ®µå‡å¼€å¯çº¦æŸï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚

---

### ç¤ºä¾‹å»ºè¡¨è¯­å¥å‚è€ƒ

```sql
CREATE TABLE topics (
    id INT AUTO_INCREMENT PRIMARY KEY,
    content TEXT NOT NULL
);

CREATE TABLE agents (
    id INT AUTO_INCREMENT PRIMARY KEY,
    topic_id INT NOT NULL,
    name VARCHAR(255) NOT NULL,
    order_index INT NOT NULL,
    FOREIGN KEY (topic_id) REFERENCES topics(id)
);

CREATE TABLE dialogues (
    id INT AUTO_INCREMENT PRIMARY KEY,
    topic_id INT NOT NULL,
    agent_id INT NOT NULL,
    round_id INT NOT NULL,
    utterance_index INT NOT NULL,
    conclusion TEXT,
    references_json TEXT,
    FOREIGN KEY (topic_id) REFERENCES topics(id),
    FOREIGN KEY (agent_id) REFERENCES agents(id)
);
```
ï¼‰

## 5. æ¥å£è¯´æ˜

æœ¬ç³»ç»Ÿåç«¯åŸºäº Express æ„å»ºï¼Œæ‰€æœ‰æ¥å£å‰ç¼€ä¸º `/api/`ã€‚æ¥å£ä¸»è¦ç”¨äºå‰åç«¯é€šä¿¡åŠè°ƒç”¨ Python æ¨¡å—å®Œæˆå„é˜¶æ®µè¾©è®ºç”Ÿæˆä¸æ•°æ®è·å–ã€‚ä»¥ä¸‹ä¸ºå„ä¸»è¦ API è¯´æ˜ã€‚

---

### 5.1 `POST /api/debate_1` - ç¬¬ä¸€é˜¶æ®µï¼šç«‹è®º

ç”¨äºåˆå§‹åŒ–è¾©é¢˜ä¸è§’è‰²ï¼Œå¹¶ç”Ÿæˆæ¯ä½æ™ºèƒ½ä½“çš„ç«‹è®ºå‘è¨€ã€‚

#### è¯·æ±‚å‚æ•°ï¼ˆJSONï¼‰ï¼š

```json
{
  "topic": "æ˜¯å¦åº”ç¦æ­¢å‘å±•ç±»äººæœºå™¨äºº",
  "agents": [
    { "name": "ç¯ä¿ä¸»ä¹‰è€…", "order": 1 },
    { "name": "ç»æµå­¦å®¶", "order": 2 },
    { "name": "æ”¿ç­–åˆ¶å®šè€…", "order": 3 }
  ]
}
```

#### è¿”å›ç¤ºä¾‹ï¼š

```json
{
  "success": true,
  "topic_id": 1
}
```

---

### 5.2 `POST /api/debate_2` - ç¬¬äºŒé˜¶æ®µï¼šè¾©è®º

æ¯ä½æ™ºèƒ½ä½“åŸºäºä¸Šä¸‹æ–‡è½®æµå‘è¨€ä¸‰æ¬¡ï¼Œæ€»å…± 9 æ¡å›åº”ã€‚

#### è¯·æ±‚å‚æ•°ï¼š

```json
{
  "topic": "æ˜¯å¦åº”ç¦æ­¢å‘å±•ç±»äººæœºå™¨äºº",
  "topic_id": 1,
  "agents": [
    { "name": "ç¯ä¿ä¸»ä¹‰è€…" },
    { "name": "ç»æµå­¦å®¶" },
    { "name": "æ”¿ç­–åˆ¶å®šè€…" }
  ]
}
```

#### è¿”å›ç¤ºä¾‹ï¼š

```json
{
  "success": true,
  "dialogues": [
    {
      "name": "ç»æµå­¦å®¶",
      "text": "...",
      "references": [...]
    }
  ]
}
```

---

### 5.3 `POST /api/debate_3` - ç¬¬ä¸‰é˜¶æ®µï¼šæ™ºèƒ½ä½“æ€»ç»“

è°ƒç”¨ Python è„šæœ¬ï¼Œç”Ÿæˆæ¯ä½æ™ºèƒ½ä½“å¯¹æ•´åœºè¾©è®ºçš„æ€»ç»“æ€§å‘è¨€ã€‚

#### è¯·æ±‚å‚æ•°ï¼š

ä¸ `/api/debate_2` ç›¸åŒ

#### è¿”å›ç¤ºä¾‹ï¼š

```json
{
  "success": true,
  "summaries": [
    {
      "name": "å“²å­¦è¯„è®ºè€…",
      "text": "...",
      "references": [...],
      "key_points": [...]
    }
  ]
}
```

---

### 5.4 `POST /api/debate_4` - ä¸»æŒäººæ€»ç»“

ç»¼åˆæ‰€æœ‰æ™ºèƒ½ä½“çš„æ€»ç»“ï¼Œç”±ç³»ç»Ÿç”Ÿæˆâ€œæ€»ç»“è€…â€è§’è‰²çš„æœ€ç»ˆæ€»ç»“å‘è¨€ã€‚

#### è¯·æ±‚å‚æ•°ï¼š

ä¸ `/api/debate_3` ç›¸åŒ

#### è¿”å›ç¤ºä¾‹ï¼š

```json
{
  "success": true,
  "conclusion": "...",
  "references": [...],
  "key_points": [...]
}
```

---

### 5.5 `GET /api/dialogues?topic_id=1` - è·å–ç¬¬ä¸€è½®å‘è¨€

è·å–æŒ‡å®š `topic_id` å¯¹åº”çš„æ‰€æœ‰ç«‹è®ºå‘è¨€å†…å®¹ï¼ˆround_id = 1ï¼‰ã€‚

#### è¿”å›ç¤ºä¾‹ï¼š

```json
{
  "success": true,
  "dialogue": [
    {
      "name": "æŠ€æœ¯ä¹è§‚ä¸»ä¹‰è€…",
      "text": "...",
      "references": [...]
    }
  ]
}
```

---

### 5.6 `GET /api/export-latest` - å¯¼å‡ºè¾©è®ºå†…å®¹

è°ƒç”¨ `export_debate.py` å°†æœ€æ–°è¾©è®ºæ•°æ®å¯¼å‡ºå¹¶å‹ç¼©ä¸º zip æ–‡ä»¶ã€‚

#### è¿”å›ç±»å‹ï¼š

- `.zip` æ–‡ä»¶ä¸‹è½½ï¼ˆåŒ…å«ç»“æ„åŒ–æ–‡æœ¬ä¸å¼•ç”¨æ–‡çŒ®ï¼‰

---

### 5.7 å¤–éƒ¨ä¾èµ–æ¥å£ï¼šOpenAI API

æ‰€æœ‰æ™ºèƒ½ä½“å‘è¨€å‡é€šè¿‡è°ƒç”¨ Python è„šæœ¬è®¿é—® OpenAI API æ¥å£ç”Ÿæˆã€‚

---

### æ³¨æ„äº‹é¡¹

- æ‰€æœ‰å‘è¨€ç»“æœå‡ä¸º JSON æ ¼å¼è¿”å›ï¼›
- è¯·æ±‚ä¸­è‹¥å‚æ•°ç¼ºå¤±ï¼Œåç«¯å°†è¿”å› 400 é”™è¯¯ï¼›
- Python è„šæœ¬è°ƒç”¨ OpenAI API å—å¯†é’¥æƒé™å’Œé€Ÿç‡é™åˆ¶çº¦æŸï¼Œè¯·å¦¥å–„ä¿ç®¡å¯†é’¥ï¼›
- å¯¼å‡ºåŠŸèƒ½ä¾èµ–æ–‡ä»¶å†™æƒé™å’Œ MySQL è¿æ¥çŠ¶æ€ï¼Œè¯·ç¡®ä¿åç«¯ä¸æ•°æ®åº“è¿æ¥ç¨³å®šã€‚


## 6. æ³¨æ„äº‹é¡¹ä¸å»ºè®®

ä¸ºä¿è¯ç³»ç»Ÿç¨³å®šè¿è¡Œä¸ä¾¿äºåç»­ç»´æŠ¤éƒ¨ç½²ï¼Œä»¥ä¸‹åˆ—å‡ºç³»ç»Ÿä½¿ç”¨è¿‡ç¨‹ä¸­éœ€å…³æ³¨çš„æ³¨æ„äº‹é¡¹ä¸å»ºè®®ï¼š

---

### ç³»ç»Ÿè¿è¡Œå»ºè®®

- **Node.js ä¸ Python ç‰ˆæœ¬å»ºè®®**ï¼šæ¨èä½¿ç”¨ Node.js â‰¥ 18.0ï¼ŒPython â‰¥ 3.8ï¼›
- **æ•°æ®åº“è¿æ¥ç¨³å®šæ€§**ï¼šç¡®ä¿ `.env` é…ç½®ä¸­çš„æ•°æ®åº“ä¿¡æ¯å¡«å†™æ— è¯¯ï¼Œå¹¶ä¿è¯æ•°æ®åº“æœåŠ¡å·²å¼€å¯ï¼›
- **API å¯†é’¥ç®¡ç†**ï¼šOpenAI API Key è¯·å‹¿ä¸Šä¼ è‡³å…¬å¼€ä»“åº“ï¼Œå»ºè®®é€šè¿‡ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†å·¥å…·åŠ è½½ï¼›
- **ç«¯å£ä½¿ç”¨å†²çª**ï¼šåç«¯é»˜è®¤ä½¿ç”¨ 3001 ç«¯å£ï¼Œå‰ç«¯é»˜è®¤ä½¿ç”¨ Vite çš„ 5173 ç«¯å£ï¼Œä½¿ç”¨å‰è¯·ç¡®ä¿æ— ç«¯å£å†²çªï¼›
- **æ•°æ®åº“åˆå§‹åŒ–**ï¼šé¦–æ¬¡éƒ¨ç½²å‰è¯·åŠ¡å¿…è¿è¡Œ SQL è„šæœ¬åˆ›å»ºæ•°æ®è¡¨ç»“æ„ï¼ˆè§ `database.sql`ï¼‰ï¼›
- **å¯¼å‡ºåŠŸèƒ½**ï¼šå¯¼å‡ºåŠŸèƒ½éœ€ç¡®ä¿ Python è„šæœ¬ `export_debate.py` æœ‰æ–‡ä»¶ç³»ç»Ÿå†™æƒé™ï¼ŒLinux ä¸‹å»ºè®®ä½¿ç”¨ `chmod +x` æˆæƒã€‚

---

### å®‰å…¨æ€§ä¸åˆè§„æ€§

- æ‰€æœ‰æ™ºèƒ½ä½“å‘è¨€å‡é€šè¿‡ OpenAI API è°ƒç”¨ç”Ÿæˆï¼Œè°ƒç”¨è®°å½•å— OpenAI æœåŠ¡åè®®çº¦æŸï¼›
- å¦‚è¿›è¡Œé•¿æ—¶è¿è¡Œæˆ–æ‰¹é‡ç”Ÿæˆï¼Œå»ºè®®è®¾ç½® API è°ƒç”¨é€Ÿç‡é™åˆ¶æˆ–åŠ å…¥ç¼“å­˜æœºåˆ¶ï¼›
- ä¸å»ºè®®å°†ç³»ç»Ÿç”¨äºç”Ÿæˆæ•æ„Ÿã€æ­§è§†æ€§æˆ–è¯¯å¯¼æ€§è¨€è®ºï¼Œä½¿ç”¨è€…åº”éµå¾ªä¼¦ç†è§„èŒƒã€‚

---

### å¯æ‹“å±•å»ºè®®

- å¯æ·»åŠ æ›´å¤šæ™ºèƒ½ä½“è§’è‰²ï¼Œé€šè¿‡é…ç½®è§’è‰²åº“å¹¶å…³è”ç‰¹å®šæç¤ºè¯æ¨¡æ¿å®ç°ï¼›
- å¯æ¥å…¥è‡ªå»º RAG æ£€ç´¢ç³»ç»Ÿä»¥æ›¿ä»£ OpenAI Embedding APIï¼›
- å¯æ‰©å±•æ€»ç»“æ¨¡å—ä¸ºå¤šå±‚ç»“æ„ï¼Œå¦‚ä¸ªäººæ€»ç»“ + ç»„é—´å›åº” + ä¸“å®¶å›é¡¾ï¼›
- å¯è€ƒè™‘å¼•å…¥è¯„åˆ†æ¨¡å—ï¼Œå¯¹å‘è¨€è¿›è¡Œå®æ—¶é€»è¾‘æ€§ä¸ç›¸å…³æ€§è¯„ä¼°ã€‚

---
